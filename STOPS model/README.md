# STOPS Model for Honolulu

The Simplified Trips-on-Project (STOPS) model is a series of programs designed to quickly produce plausible forecasts of transit project ridership using readily available census data, transit ridership and schedule information, and metropolitan planning organization forecasts of demographic growth. In its basic form, STOPS performs many of the same computations of transit level-of-service and market share found in trip-based model sets maintained by Metropolitan Planning Organizations (MPOs) throughout the United States. Like these MPO models, STOPS first creates a zone-to-zone matrix of person trips stratified by purpose and socioeconomic class. It then splits these trips into separate tables for each travel mode using a nested logit mode choice model. Finally, STOPS assigns each of the mode-specific tables to specific transportation facilities (e.g., transit routes, stations, or bus stops1) to determine transit travel volumes.  Developed by the Federal Transit Administration, STOPS is typically used to evaluate projects seeking funding from FTA's [Capital Investment Grants Program](https://www.transit.dot.gov/CIG). An earlier version of STOPS was used to develop ridership projections for the [Honolulu Rail Project](https://www.honolulutransit.org/) and as an example project application in FTA STOPS training workshops. The model was updated by Julie Dunbar and Bill Davidson in 2020 to support on-going travel forecasting work by the OahuMPO. In the near term the results will be used to validate the existing Version 6 of the regional travel model. In the longer term is will also be compared to, and possibly a part of, the planned Version 7 system.

Several scenarios were built as part of PAO 6, Transit Model Evaluation and Improvement, in the FY20-21 OahuMPO travel modeling support contract. Each scenario includes data for a specific year and transit network. Different scenarios can be constructed for different time horizons, different project alignments, or different socioeconomic inputs to the model. All three scenarios were constructed using 2015 socioeconomic data and highway congestion measures (skims). The three scenarios differ in their assumed transit network, service levels and APC data used for calibration:

+ A [2017 base year](https://www.dropbox.com/s/axe8iq14103jred/honolulu2017.zip) that represents a fall 2017 transit network (bus only) provided in GTFS format and calibrated to 2017 Automated Passenger Count (APC) Data for the same time period. 
+ A [2019 base year](https://www.dropbox.com/s/h3c336m7ijpyg4w/honolulu2019.zip) that represents a fall 2019 transit network (bus only) provided in GTFS format and calibrated to 2019 Automated Passneger Count (APC) Data for the same time period.
+ A [19BLDNR](https://www.dropbox.com/s/3tp3nkasqu5zk52/honolulu19BLDNR.zip) scenario that includes the same fall 2019 transit network but with the addition of the light rail line and related modifications to bus routes to accomodate rail station connections, as provided by DTS for testing purposes.

Each link above is associated with a compressed archive file approximately 500 MB in size. It contains all of the input and output files associated with that scenario. A control file for running the program is included in the top-level directory of each of the compressed archives. The folders included in each scenario are defined by the STOPS program, with the `Inputs` and `Districts` folders being created for each scenario and the remainder created by STOPS to hold intermediate working or output files:

+ `Districts` is a folder created during a STOPS application that contains the shape file and data file that describe the districts for the particular scenario.
+ `GTFOutput` is a folder created during a STOPS application containing GTFS files for a particular scenario, saved by period (PK or OP) and network (Existing, Nobuild Build)
+ `Inputs` is a folder provided by the user that contains required input files to run the STOPS application for a given scenario.  These files are important to carry forward from one scenario to another to ensure consistency of input data and networks.
+ `Logfiles` is a folder created during a STOPS application that contains STOPS program logfiles generated for a given scenario to determine the completion status of each step.
+ `OutputData`is a folder created during a STOPS application that contains various output data in formats needed for STOPS reporting of results for a given scenario.
+ `Reports`is a folder created during a STOPS application that contains the results for a scenario.  Of particular importance in this folder is the file ending in results.PRN. It is a text file that includes all of the STOPS output for a given scenario.
+ `Scratch` is a folder created during a STOPS application containing temporarty working files for a particular scencario. Files in this folder can be deleted after each STOPS run once it is completed and checked for accuracy.
+ `Skims`is a folder created during a STOPS application that contains the skim files created for and utilized during a particularly scenario.
+ `Stops`is a folder created during a STOPS application but remains empty after the scenario run is completed.

The STOPS Application setup for OMPO and described here is linked to TransCAD.  STOPS requires a GIS Linkage during the software setup and TransCAD was selected since it is availalbe to OMPO staff.  Users who are familiar with TransCAD can utilize it to map and summarize results for a given STOPS scenario. To view results, the results.PRN file mentioned above (and found in the Reports folder for a given scenario) is the best place to start.  Since this file is a text file, the team has also created an applicaiton using R to pull certain useful results tables out of the results.PRN file and reformat them as .CSV files. The R-script requires the results.PRN file for a given scenario as input and then the user can modify the table numbers in the script to generate .CSV formatted results.  The 'Evaluation' folder contains the STOPS R-Script and the associated folders containing the modified script and results.PRN files for each scenario.  The user must have R installed on their computer to utilize this summary option.

STOPS version 2.5 was used to run these scenarios. An installer and draft user guide are stored in the `software` folder in this repository. This is a newer version of the software than available for public download on the [STOPS software webpage](https://www.transit.dot.gov/funding/grant-programs/capital-investments/stops).

Potential STOPS users are expected to be experienced in travel demand forecasting, particularly mode choice and transit network modeling. A one-day workshop was conducted on December 14, 2020 to explain how STOPS was implemented in Honolulu. The presentation materials are stored in the `training` folder, and a videorecording of the session is [available for download](https://www.dropbox.com/s/ls9g1ogyh7fry5a/OahuMPO%20STOPS%20training-14Dec20.mp4).  It was not designed to be a replacement for the three-day [FTA STOPS course](https://www.ntionline.com/rideship-forecasting-with-stops-for-transit-project-planning/), which is offered on an infrequent basis. A [STOPS application guidebook](https://www.fsutmsonline.net/images/uploads/Task_1_Guidebook_for_Florida_STOPS_Application.pdf) from the Florida DOT provides an overview that complements the user guide included in the `training` folder.
